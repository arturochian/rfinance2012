ls(all=T)
require(quantstrat)
getSymbols('^GSPC', from='1900-01-01')
currency('USD')
initPortf('bumble', 'GSPC')
initAcct('bumble', portfolios='bumble', initEq=1000000, initDate='1950-01-01')
initOrders(portfolio='bumble', initDate='1950-01-01')
bee = strategy('bumble')
summary(bee)
bee = add.indicator(bee, 'SMA', arguments = list(quote(Cl(mktdata)), n=10 ), label='fast')
summary(bee)
bee = add.indicator(bee, 'BBands', arguments = list(quote(HLC(mktdata)), n=30, sd=0.5 ))
summary(bee)
bee = add.signal(bee, name='sigCrossover', arguments = list(column=c('fast', 'up'), relationship='gt', label='fast.gt.up'))
bee = add.signal(bee, name='sigCrossover', arguments = list(column=c('fast', 'dn'), relationship='lt', label='fast.lt.dn'))
bee = add.rule(bee, name='ruleSignal', arguments=list(sigcol='fast.gt.up', sigval=TRUE, orderqty=1000, orderside='long'      ), type='enter'     )
?add.rule
bee = add.rule(bee, name='ruleSignal', arguments=list(sigcol='fast.lt.dn', sigval=TRUE, orderqty=1000, orderside='long'      ), type='exit'     )
clear()
out = applyStrategy(bee, portfolios='bumble')
savehistory()
q()
