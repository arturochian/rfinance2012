require(quantstrat)
getSymbols('^GSPC', from='1900-01-01')
require(blotter)
ls()
ls(all=T)
require(PerformanceAnalytics)
clear()
currency('USD')
USD
get('USD', envir=.instrument)
get('USD')
stock('GSPC', currency=USD, multiplier=1)
stock('GSPC', currency='USD', multiplier=1)
get('GSPC', envir=.instrument)
ls(all=T)
get('GSPC', envir=.blotter)
ls(all=T)
get('GSPC', envir=.strategy)
get('GSPC')
getSymbols('SPY', from='1900-01-01')
stock('SPY', currency='USD', multiplier=1)
get('SPY', envir=.instrument)
SPY = to.monthly(SPY, indexAt='endof')
head(SPY)
SPY$ten = SMA(Cl(SPY), 10)
head(SPY)
tail(SPY)
initPortf('faber', 'SPY', initDate='1997-12-31')
initAcct('faber', portfolios='faber', initDate='1997-12-31', initEq=10000)
ls()
ls(.blotter)
ls(.instrument)
theme=theme()
theme=chart.theme()
theme <- chart.theme()
require(quantmod)
theme <- chart.theme()
theme=chart_theme()
theme
theme$col$line.col = 'grey'
chart_Series(SPY, theme=theme, name='SPY')
theme$col$up.col = 'lightgreen'
theme$col$up.border = 'lightgreen'
theme$col$dn.col = 'pink'
theme$col$dn.col.border = 'pink'
chart_Series(SPY, theme=theme, name='SPY')
theme=chart_theme()
theme$col$dn.col.border
theme$col$up.col = 'lightgreen'
theme$col$dn.col = 'pink'
theme$col$dn.col.border
theme$col$dn.border
theme$col$dn.border = 'pink'
theme$col$dn.col = 'pink'
chart_Series(SPY, theme=theme, name='SPY')
dev.off()
theme$col$dn.border = 'pink'
theme$col$dn.col = 'pink'
theme$col$up.col = 'lightgreen'
theme$col$up.border = 'lightgreen'
chart_Series(SPY, theme=theme, name='SPY')
getInstrument(USD)
getInstrument('USD')
getInstrument('SPY')
plot(add_SMA(n=10, col='blue'))
for(i in 1:nrow(SPY)) {
CurrentDate= time(SPY)[i]
ClosePrice = as.numeric(Cl(SPY[i,]))
Posn = getPosQty('faber', symbol='SPY', Date=CurrentDate)
if( !is.na(as.numeric(SPY[i, 'ten'])) {
if( !is.na(as.numeric(SPY[i, 'ten'])) 
if(Posn == 0)
source('guy.r')
load('guy.r')
source('guy.r')
load('guy.r')
source('guy.r')
head(SPY)
source('guy.r')
source('guy.r')
readLines('guy.r')
time(SPY)[,1]
time(SPY)[12,]
time(SPY)[12]
time(SPY)[99]
class(time(SPY)[99])
source('guy.r')
readLines('guy.r')
ls()
for(i in 1:nrow(SPY)) {
  CurrentDate = time(SPY)[i]
  ClosePrice  = as.numeric(Cl(SPY[i,]))
  Posn = getPosQty('faber', Symbol='SPY', Date=CurrentDate)
    if( !is.na(as.numeric(SPY[i, 'ten']))){
    if(Posn == 0) { 
      if(ClosePrice > as.numeric(SPY[i, 'ten'] )){
        addTxn('faber', Symbol='SPY', TxnDate=CurrentDate, TxnPrice=ClosePrice, TxnQty=1000, TxnFees=0) }
    } else {
      if(ClosePrice < as.numeric(SPY[i, 'ten'])) {
        addTxn('faber', Symbol='SPY' ,TxnDate=CurrentDate, TxnPrice=ClosePrice, TxnQty = -Posn, TxnFees=0)}
      }
      }
      updatePortf('faber', Dates=CurrentDate)
      updateAcct('faber', Dates=CurrentDate)
      updateEndEq('faber', Dates=CurrentDate)
}
ls()
head(SPY)
S = SPY
SPY = SPY['1998-01-01::']
head(SPY)
source('guy.r')
q()
