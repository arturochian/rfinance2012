require(quantstrat)
getSymbols('SPY', from='1900-01-01')
currency('USD')
initPortf('bug', 'SPY')
initAcct('bug', portfolios='bug', initEq=1000000, initDate='1950-01-01')
initOrders(portfolio='bug', initDate='1950-01-01')
gnat = strategy('bug')
gnat = add.indicator(gnat, 'SMA', arguments = list(x = quote(Cl(mktdata)), n=50 ), label='fast')
gnat = add.indicator(gnat, 'SMA', arguments = list(x = quote(Cl(mktdata)), n=200 ), label='slow')
gnat = add.signal(gnat, name='sigCrossover', arguments = list(column=c('fast', 'slow'), relationship='gt', label='fast.gt.slow'))
gnat = add.signal(gnat, name='sigCrossover', arguments = list(column=c('fast', 'slow'), relationship='lt', label='fast.lt.slow'))
gnat = add.rule(gnat, name='ruleSignal', arguments=list(sigcol='fast.lt.slow', sigval=TRUE, orderqty='all', orderside='long'      ), type='exit'     )
gnat = add.rule(gnat, name='ruleSignal', arguments=list(sigcol='fast.lt.slow', sigval=TRUE, orderqty=1000, orderside='short'      ), type='enter'     )
gnat = add.rule(gnat, name='ruleSignal', arguments=list(sigcol='fast.gt.slow', sigval=TRUE, orderqty=1000, orderside='long'      ), type='enter'     )
gnat = add.rule(gnat, name='ruleSignal', arguments=list(sigcol='fast.gt.slow', sigval=TRUE, orderqty='all', orderside='short'      ), type='exit'     )
out = applyStrategy(gnat, portfolios='bug')


Error in .xts(e, .index(e1), .indexCLASS = indexClass(e1), .indexFORMAT = indexFormat(e1),  : 
                index length must match number of observations
In addition: Warning message:
In getInstrument(symbol) :
  instrument SPY not found, please create it first.
